---

layout: single

title: "[Daily] DI / DIP"

categories: Daily

toc: true

toc_sticky: true

author_profile: false

sidebar:

tags:

---
# π”§ DI (Dependency Injection)λ€?

  

> **DI(μμ΅΄μ„± μ£Όμ…)**μ€ κ°μ²΄κ°€ μ§μ ‘ ν•„μ”ν• μμ΅΄ κ°μ²΄λ¥Ό μƒμ„±ν•μ§€ μ•κ³ , **μ™Έλ¶€μ—μ„ μ£Όμ…λ°›λ” λ°©μ‹**

  

---

  

### π“ μ: "μλ™μ°¨(Car)"μ— "μ—”μ§„(Engine)"μ΄ ν•„μ”ν•  λ•

  

#### β μ§μ ‘ μƒμ„± (μμ΅΄μ„± μ§μ ‘ κ΄€λ¦¬)

```java

class Car {

Β  Β  private Engine engine = new Engine();

Β  Β  // Carκ°€ μ§μ ‘ Engineμ„ μƒμ„±ν•¨

}

```

#### β… μμ΅΄μ„± μ£Όμ… λ°©μ‹

```java

class Car {

Β  Β  private Engine engine;

  

Β  Β  public Car(Engine engine) { Β // μ™Έλ¶€μ—μ„ Engineμ„ μ£Όμ…λ°›μ

Β  Β  Β  Β  this.engine = engine;

Β  Β  }

}

  

```

  

μ΄λ ‡κ² ν•λ©΄ Carλ” μ–΄λ–¤ μΆ…λ¥μ μ—”μ§„μ΄ λ“¤μ–΄μ¤λ”μ§€ λ°λΌλ„ λκ³ , ν…μ¤νΈλ„ λ” μ μ—°ν•κ² ν•  μ μλ‹¤.

  

### π§© μ£Όμ” μ©μ–΄ μ •λ¦¬

  

| μ©μ–΄ Β  Β  Β  Β  Β  Β  Β  Β  Β  Β  Β  Β  Β  Β  | μ„¤λ… Β  Β  Β  Β  Β  Β  Β  Β  Β  Β  Β  Β  Β  Β  Β  Β  Β  Β  Β  Β  Β  Β  Β  Β  Β  Β  Β  Β  Β  Β  Β  Β  Β  Β  Β  Β  Β |

| ------------------------------ | --------------------------------------------------------------------------- |

| **Dependency (μμ΅΄μ„±)** Β  Β  Β  Β  Β  | ν• κ°μ²΄κ°€ λ‹¤λ¥Έ κ°μ²΄μ— **κΈ°λ¥μ μΌλ΅ μμ΅΄**ν•κ³  μμ„ λ•, κ·Έ λ‹¤λ¥Έ κ°μ²΄λ¥Ό "μμ΅΄μ„±"μ΄λΌκ³  λ¶€λ¦„. μ: `Car β†’ Engine` Β  |

| **Injection (μ£Όμ…)** Β  Β  Β  Β  Β  Β  | μμ΅΄ κ°μ²΄λ¥Ό μ§μ ‘ μƒμ„±ν•μ§€ μ•κ³ , **μ™Έλ¶€μ—μ„ λ„£μ–΄μ£Όλ” ν–‰μ„** Β  Β  Β  Β  Β  Β  Β  Β  Β  Β  Β  Β  Β  Β  Β  Β  Β  Β  Β  Β  |

| **DI Container** Β  Β  Β  Β  Β  Β  Β  | μμ΅΄μ„±λ“¤μ„ κ΄€λ¦¬ν•κ³  μ£Όμ…ν•΄μ£Όλ” μ»¨ν…μ΄λ„. Springμ `ApplicationContext`κ°€ λ€ν‘μ  Β  Β  Β  Β  Β  Β  Β  Β  Β  Β |

| **Constructor Injection** Β  Β  Β | μƒμ„±μλ¥Ό ν†µν•΄ μμ΅΄μ„±μ„ μ£Όμ… (κ°€μ¥ κ¶μ¥λλ” λ°©μ‹) Β  Β  Β  Β  Β  Β  Β  Β  Β  Β  Β  Β  Β  Β  Β  Β  Β  Β  Β  Β  Β  Β  Β  Β |

| **Setter Injection** Β  Β  Β  Β  Β  | setter λ©”μ„λ“λ¥Ό ν†µν•΄ μμ΅΄μ„± μ£Όμ… Β  Β  Β  Β  Β  Β  Β  Β  Β  Β  Β  Β  Β  Β  Β  Β  Β  Β  Β  Β  Β  Β  Β  Β  Β  Β  Β  |

| **Field Injection** Β  Β  Β  Β  Β  Β | ν•„λ“μ— μ§μ ‘ μ£Όμ… (`@Autowired` λ“±). κ°„λ‹¨ν•μ§€λ§ ν…μ¤νΈ μ–΄λ ¤μ›€ Β  Β  Β  Β  Β  Β  Β  Β  Β  Β  Β  Β  Β  Β  Β  Β  Β  |

| **IoC (Inversion of Control)** | "μ μ–΄μ μ—­μ „" β€” κ°μ²΄μ μƒμ„±κ³Ό μƒλ…μ£ΌκΈ° κ΄€λ¦¬λ¥Ό κ°λ°μκ°€ μ•„λ‹λΌ **ν”„λ μ„μ›ν¬κ°€ λ‹΄λ‹Ή**ν•λ” κ°λ…. DIλ” IoCλ¥Ό κµ¬ν„ν•λ” ν• λ°©μ‹ |

  

### π—οΈ DIλ¥Ό μ‚¬μ©ν•λ” μ΄μ 

  

- **κ²°ν•©λ„ λ‚®μ¶¤** β†’ μ½”λ“κ°€ λ” μ μ—°ν•κ³  ν™•μ¥ κ°€λ¥

- **ν…μ¤νΈ μ‰¬μ›€** β†’ κ°€μ§(Mock) κ°μ²΄ μ£Όμ…ν•΄μ„ λ‹¨μ„ ν…μ¤νΈ κ°€λ¥

- **μ μ§€λ³΄μ νΈλ¦¬** β†’ μƒλ΅μ΄ μμ΅΄μ„±μΌλ΅ μ‰½κ² κµμ²΄ κ°€λ¥

- **κ΄€μ‹¬μ‚¬ λ¶„λ¦¬** β†’ κ°μ²΄λ” μμ‹ μ λ΅μ§μ—λ§ μ§‘μ¤‘ν•κ³  μμ΅΄μ„± κ΄€λ¦¬λ” μ™Έλ¶€μ— λ§΅κΉ€

  

### π” μμ£Ό ν•¨κ» μ–ΈκΈ‰λλ” κ°λ…

  

|κ°λ…|μ„¤λ…|

|---|---|

|**Service, Repository λ“± μ—­ν•  λ¶„λ¦¬**|DIλ¥Ό ν†µν•΄ κ° κ³„μΈµ κ°„ κ²°ν•©μ„ λμ¨ν•κ² λ§λ“¤ μ μμ|

|**@Component, @Service, @Repository**|Springμ΄ μλ™μΌλ΅ BeanμΌλ΅ λ“±λ΅ν•΄μ„ DI κ°€λ¥ν•κ² ν•¨|

|**@Autowired, @Inject, @Qualifier**|μμ΅΄μ„±μ„ μ£Όμ…ν•λ” λ°©λ²•κ³Ό μ΅°κ±΄μ„ μ§€μ •ν•¨|

  

## π”§ Springμ—μ„μ DI μμ 

  

### π― λ©ν‘

  

- `Car`κ°€ `Engine`μ— μμ΅΄

- λ‹¤μ–‘ν• λ°©μ‹μΌλ΅ **Engineμ„ μ£Όμ…** (DI)

- DIλ¥Ό ν†µν•΄ Carλ” μ–΄λ–¤ Engineμ΄λ“  λ°›μ•„μ„ μ“Έ μ μλ„λ΅ μ„¤κ³„

  

---

  

### π”Ή μΈν„°νμ΄μ¤ λ° κµ¬ν„μ²΄

```java

public interface Engine {

Β  Β  void start();

}

```

  

```java

@Component

public class GasEngine implements Engine {

Β  Β  @Override

Β  Β  public void start() {

Β  Β  Β  Β  System.out.println("Gas engine starting...");

Β  Β  }

}

```

  

```java

@Component

public class ElectricEngine implements Engine {

Β  Β  @Override

Β  Β  public void start() {

Β  Β  Β  Β  System.out.println("Electric engine starting...");

Β  Β  }

}

  

```

  

### π”Ή Car ν΄λμ¤ (DI μ μ©)

  

#### Β λ°©λ²• 1: μƒμ„±μ μ£Όμ… (κ°€μ¥ κ¶μ¥λ¨)

```java

@Component

public class Car {

  

Β  Β  private final Engine engine;

  

Β  Β  @Autowired Β // μƒλµ κ°€λ¥ (Spring 4.3 μ΄μƒ)

Β  Β  public Car(Engine engine) {

Β  Β  Β  Β  this.engine = engine;

Β  Β  }

  

Β  Β  public void drive() {

Β  Β  Β  Β  engine.start();

Β  Β  Β  Β  System.out.println("Car is moving");

Β  Β  }

}

  

```

  

#### λ°©λ²• 2: ν•„λ“ μ£Όμ… (ν…μ¤νΈ λ¶νΈ, λΉ„κ¶μ¥)

  

```java

@Component

public class Car {

  

Β  Β  @Autowired

Β  Β  private Engine engine;

  

Β  Β  public void drive() {

Β  Β  Β  Β  engine.start();

Β  Β  Β  Β  System.out.println("Car is moving");

Β  Β  }

}

  

```

  

#### λ°©λ²• 3: Setter μ£Όμ… (μ„ νƒμ  μμ΅΄μ„±μ— μ ν•©)

  

```java

@Component

public class Car {

  

Β  Β  private Engine engine;

  

Β  Β  @Autowired

Β  Β  public void setEngine(Engine engine) {

Β  Β  Β  Β  this.engine = engine;

Β  Β  }

  

Β  Β  public void drive() {

Β  Β  Β  Β  engine.start();

Β  Β  Β  Β  System.out.println("Car is moving");

Β  Β  }

}

  

```

  

### π”§ ν•„λ“ μ£Όμ…μ΄ ν…μ¤νΈμ—μ„ λ¶νΈν• μ΄μ 

  

#### β— λ¬Έμ : μ£Όμ…μ„ μ§μ ‘ ν•  μ μ—†λ‹¤

  

ν•„λ“ μ£Όμ…μ€ μ•„λμ²λΌ `private` ν•„λ“μ— `@Autowired`λ¥Ό λ¶™μ—¬ μλ™ μ£Όμ…

```java

@Component

public class Car {

Β  Β  @Autowired

Β  Β  private Engine engine;

  

Β  Β  public void drive() {

Β  Β  Β  Β  engine.start();

Β  Β  }

}

```

μ΄λ° κ²½μ° ν…μ¤νΈ μ½”λ“μ—μ„ **μ§μ ‘ `engine`μ„ μ£Όμ…ν•  μ μ—†λ‹¤**

  

- `Car car = new Car();` λ΅ μƒμ„±ν•΄λ„ `engine`μ΄ `null`

- `engine`μ„ μ£Όμ…ν•λ ¤λ©΄ **λ¦¬ν”λ ‰μ…**μ„ μ¨μ•Ό ν•¨:

  

```java

@Test

void testDrive_withReflection() throws Exception {

Β  Β  Car car = new Car();

Β  Β  Engine mockEngine = mock(Engine.class);

  

Β  Β  Field field = Car.class.getDeclaredField("engine");

Β  Β  field.setAccessible(true);

Β  Β  field.set(car, mockEngine); Β // κ°•μ λ΅ μ£Όμ…

Β  Β  car.drive();

}

  

```

  

#### β… μƒμ„±μ μ£Όμ…κ³Ό λΉ„κµ

  

μƒμ„±μ μ£Όμ…μ΄λ©΄, λ‹¤μκ³Ό κ°™μ΄ μ‰½κ² ν…μ¤νΈ κ°€λ¥:

```java

@Test

void testDrive() {

Β  Β  Engine mockEngine = mock(Engine.class);

Β  Β  Car car = new Car(mockEngine); Β // μ§μ ‘ μ£Όμ… κ°€λ¥

  

Β  Β  car.drive();

  

Β  Β  verify(mockEngine).start(); Β // κ²€μ¦λ„ κ°€λ¥

}

```

  

### π’΅ ν•„λ“ μ£Όμ…μ λ‹¤λ¥Έ λ‹¨μ 

  

| ν•­λ© Β  Β  Β  Β  Β  | λ‚΄μ© Β  Β  Β  Β  Β  Β  Β  Β  Β  Β  Β  Β  Β  Β  Β  Β  |

| ------------ | ---------------------------------- |

| β λ¶λ³€μ„± μ—†μ Β  Β  | μƒμ„± μ‹μ μ— μ£Όμ…λμ§€ μ•μ•„μ„ final ν‚¤μ›λ“ λ» μ”€ Β  Β  Β |

| β λ…μ‹μ  μμ΅΄μ„± μ—†μ | μ–΄λ–¤ μμ΅΄μ„±μ΄ ν•„μ”ν•μ§€ μƒμ„±μ μ‹κ·Έλ‹μ²λ΅λ” μ• μ μ—†μ Β  Β  |

| β ν…μ¤νΈ μ–΄λ ¤μ›€ Β  Β | μ„μ—μ„ λ³Έ κ²ƒμ²λΌ mock μ£Όμ…, μμ΅΄μ„± κµμ²΄κ°€ μ–΄λ µκ³  μ°νμ  |

| β μ μ§€λ³΄μ μ–΄λ ¤μ›€ Β  | μ½”λ“λ§ λ³΄κ³ λ” μ–΄λ–¤ κ°μ²΄κ°€ λ“¤μ–΄μ¤λ”μ§€ μ¶”λ΅ μ΄ μ–΄λ ¤μ›€ Β  Β  Β  |

| Β  Β  Β  Β  Β  Β  Β | Β  Β  Β  Β  Β  Β  Β  Β  Β  Β  Β  Β  Β  Β  Β  Β  Β  Β |

  

### β… μ •λ¦¬

  

- ν•„λ“ μ£Όμ…μ€ νΈλ¦¬ν•΄ λ³΄μ΄μ§€λ§, **μ λ‹› ν…μ¤νΈ, λ¶λ³€μ„±, λ…μ‹μ„±** μΈ΅λ©΄μ—μ„ λ¨λ‘ λ¶λ¦¬ν•¨

- κ·Έλμ„ **Spring κ³µμ‹ κ°€μ΄λ“**, **Josh Long** κ°™μ€ μ „λ¬Έκ°€λ“¤λ„ **"ν•­μƒ μƒμ„±μ μ£Όμ…μ„ μ“°λΌ"κ³  κ¶μ¥** ν•¨

- ν…μ¤νΈμ—μ„λ” νΉν **mock κ°μ²΄λ¥Ό μ£Όμ…ν•κΈ° μ–΄λ ¤μ›μ„** μ •λ§ λ¶νΈν•¨

  

#### β… Setter μ£Όμ…μ΄ "μ„ νƒμ  μμ΅΄μ„±"μ— μ ν•©ν• μ΄μ 

  

> μ–΄λ–¤ μμ΅΄μ„±μ€ **μμΌλ©΄ μΆ‹μ§€λ§, μ—†μ–΄λ„ λ™μ‘μ΄ κ°€λ¥ν• κ²½μ°** β†’ κΌ­ μƒμ„±μμ— λ„£μ„ ν•„μ”κ°€ μ—†μ Β 

> β†’ κ·Έλμ„ setterλ΅ **ν•„μ”ν•  λ•λ§ μ£Όμ…**ν•λ„λ΅ μ„¤κ³„

  

```java

@Component

public class MyService {

  

Β  Β  private Logger logger;

  

Β  Β  @Autowired(required = false) Β // μ£Όμ… μ• λΌλ„ μ¤λ¥ μ• λ‚¨

Β  Β  public void setLogger(Logger logger) {

Β  Β  Β  Β  this.logger = logger;

Β  Β  }

  

Β  Β  public void doSomething() {

Β  Β  Β  Β  if (logger != null) {

Β  Β  Β  Β  Β  Β  logger.log("Starting...");

Β  Β  Β  Β  }

  

Β  Β  Β  Β  System.out.println("Doing something important!");

Β  Β  }

}

```

- `Logger`λ” **μ—†μ–΄λ„ λ΅μ§μ€ λμ•„κ°**

- μμ„ κ²½μ°μ—λ§ λ΅κΉ… μν–‰

- λ”°λΌμ„ **Setter μ£Όμ…**μ΄ μ ν•©

  

##### β… Setter μ£Όμ…μ μ¥μ 

  

| ν•­λ© Β  Β  Β  Β  Β  Β  Β  Β  Β  Β | μ„¤λ… Β  Β  Β  Β  Β  Β  Β  Β  Β  Β  Β  Β  Β  Β  Β  Β  Β  Β  Β  Β  Β  Β  Β  Β  Β |

| --------------------- | --------------------------------------------------- |

| β” μ„ νƒμ  μμ΅΄μ„± ν‘ν„ κ°€λ¥ Β  Β  Β  | `@Autowired(required = false)`λ΅ **μμΌλ©΄ μ£Όμ…, μ—†μΌλ©΄ λ„μ–΄κ°** |

| β” λ‚μ¤‘μ— λ°”κΏ€ μ μμ Β  Β  Β  Β  | Bean μƒμ„± μ΄ν›„ λ‹¤λ¥Έ κ°μ²΄λ΅λ„ μ£Όμ… κ°€λ¥ (λ™μ μΌλ΅ λ°”κΎΈκ³  μ‹¶μ„ λ•) Β  Β  Β  Β  Β  Β |

| β” ν…μ¤νΈμ—μ„ mock μ‰½κ² μ£Όμ… κ°€λ¥ | `setLogger(mockLogger)`μ²λΌ μ£Όμ… κ°€λ¥ Β  Β  Β  Β  Β  Β  Β  Β  Β  Β  |

  

##### β Setter μ£Όμ…μ λ‹¨μ 

  

|ν•­λ©|μ„¤λ…|

|---|---|

|β λ¶λ³€ κ°μ²΄ μ„¤κ³„ λ¶κ°€|setterλ” κ°’ λ³€κ²½ ν—μ© β†’ μƒνƒκ°€ λ°”λ€” μ μμ|

|β μμ΅΄μ„± λ„λ½ λ°©μ§€ μ–΄λ ¤μ›€|μ£Όμ…μ„ κΉλΉ΅ν•΄λ„ **μ»΄νμΌλ¬κ°€ μ• μ΅μ** (λ°νƒ€μ„ μ¤λ¥ μ λ° κ°€λ¥)|

|β λ…μ‹μ  μμ΅΄μ„± ν‘ν„ μ•½ν•¨|ν΄λμ¤λ§ λ³΄κ³ λ” ν•„μμΈμ§€ μ„ νƒμΈμ§€ λ°”λ΅ νμ•… μ–΄λ ¤μ›€|

  

### β… λΉ„κµ μ”μ•½

  

| κµ¬λ¶„ Β  Β  Β  Β  | μƒμ„±μ μ£Όμ… | Setter μ£Όμ… | ν•„λ“ μ£Όμ… Β  Β  Β  Β  Β  Β  Β  |

| ---------- | ------ | --------- | ------------------- |

| π“ μ©λ„ Β  Β  Β | ν•„μ μμ΅΄μ„± | μ„ νƒμ  μμ΅΄μ„± Β  | κ°€λ³κ² μ“°κΈ° μ‰¬μ›€ (but λΉ„κ¶μ¥) |

| π”’ λ¶λ³€μ„± Β  Β  | μ μ§€ κ°€λ¥ Β | μ μ§€ λ¶κ°€ Β  Β  | μ μ§€ λ¶κ°€ Β  Β  Β  Β  Β  Β  Β  |

| π” ν…μ¤νΈ μ©μ΄μ„± | λ§¤μ° μΆ‹μ Β | μΆ‹μ Β  Β  Β  Β | λ‚μ¨ Β  Β  Β  Β  Β  Β  Β  Β  Β |

| π§© λ…μ‹μ„± Β  Β  | λ†’μ Β  Β  | λ‚®μ Β  Β  Β  Β | λ‚®μ Β  Β  Β  Β  Β  Β  Β  Β  Β |

  

### π” μ •λ¦¬

  

- **Setter μ£Όμ…μ€ β€ν•„μλ” μ•„λ‹, μµμ…μ μΈβ€ μμ΅΄μ„±**μ„ μ£Όμ…ν•  λ• μ‚¬μ©

- κ·Έ μ™Έμ—λ” λ€λ¶€λ¶„ **μƒμ„±μ μ£Όμ…μ΄ μ •μ„**

- Springμ—μ„λ” setter μ£Όμ…λ„ κ°€λ¥ν•μ§€λ§, λ¬΄λ¶„λ³„ν•κ² μ‚¬μ©ν•λ©΄ **μ„¤κ³„κ°€ λ¨νΈν•΄μ§€κ³  μ μ§€λ³΄μ μ–΄λ ¤μ›μ§

  

## π”§ 2. DIP (Dependency Inversion Principle)

  

### π“ DIPλ€?

  

> **μμ΅΄μ„± μ—­μ „ μ›μΉ™**: Β 

> "μƒμ„ λ¨λ“(λΉ„μ¦λ‹μ¤ λ΅μ§)μ€ ν•μ„ λ¨λ“(κµ¬ν„)μ— μμ΅΄ν•΄μ„λ” μ• λλ©°, Β 

> **λ‘ λ‹¤ μ¶”μƒ(μΈν„°νμ΄μ¤)μ— μμ΅΄ν•΄μ•Ό ν•λ‹¤**."

  

#### β DIP μ„λ° μ

```java

public class Car {

Β  Β  private GasEngine engine = new GasEngine(); Β 

Β  Β  // κµ¬ν„μ²΄μ— μμ΅΄ (κ°•ν• κ²°ν•©)

}

```

  

`Car`λ” `GasEngine`μ΄λΌλ” κµ¬μ²΄ ν΄λμ¤μ— μμ΅΄ β†’ **ν™•μ¥μ„± λ‚®κ³ , ν…μ¤νΈ μ–΄λ ¤μ›€**

  

#### β… DIP λ§μ΅± μ

  

```java

public class Car {

Β  Β  private Engine engine;

  

Β  Β  public Car(Engine engine) { Β // μΈν„°νμ΄μ¤(μ¶”μƒ)μ— μμ΅΄

Β  Β  Β  Β  this.engine = engine;

Β  Β  }

}

  

```

  

`Car`λ” `Engine`μ΄λΌλ” **μ¶”μƒ νƒ€μ…**μ—λ§ μμ΅΄ β†’ μ μ—°ν•κ³  ν…μ¤νΈ μ©μ΄

  

##### β… 1. `Engine` μ¶”μƒν™”(μΈν„°νμ΄μ¤) μ •μ

  

```java

public interface Engine {

Β  Β  void start();

}

```

  

- `Engine`μ€ μΈν„°νμ΄μ¤μ΄λ―€λ΅ "ν–‰μ„(κΈ°λ¥)"λ§ μ •μ

- `Car`λ” μ΄μ  μ΄ μ¶”μƒ νƒ€μ…λ§ μ•λ©΄ λ¨

  

##### β… 2. `GasEngine` κµ¬ν„μ²΄ μ •μ (DIP λ§μ΅±)

  

```java

public class GasEngine implements Engine {

Β  Β  @Override

Β  Β  public void start() {

Β  Β  Β  Β  System.out.println("Gas engine started.");

Β  Β  }

}

```

  

- `GasEngine`μ€ `Engine` μΈν„°νμ΄μ¤λ¥Ό **κµ¬ν„**ν• ν΄λμ¤

- μ΄ κµ¬ν„μ²΄λ” μ‹¤μ  κΈ°λ¥μ„ μν–‰ν•λ” ν΄λμ¤

  

##### β… 3. `Car` ν΄λμ¤λ” μ¶”μƒν™”μ—λ§ μμ΅΄

  

```java

public class Car {

Β  Β  private final Engine engine;

  

Β  Β  public Car(Engine engine) {

Β  Β  Β  Β  this.engine = engine;

Β  Β  }

  

Β  Β  public void drive() {

Β  Β  Β  Β  engine.start();

Β  Β  }

}

  

```

  

- μ΄μ  `Car`λ” λ” μ΄μƒ `GasEngine`μ΄ λ­”μ§€ λ°λΌλ„ λ¨

- μ¤μ§ `Engine` μΈν„°νμ΄μ¤κ°€ μ κ³µν•λ” κΈ°λ¥(`start()`)λ§ μ‚¬μ©

  

##### β… 4. μ‚¬μ©ν•λ” μ½μ—μ„ μ£Όμ… (DI)

  

```java

public class Main {

Β  Β  public static void main(String[] args) {

Β  Β  Β  Β  Engine engine = new GasEngine(); // μ–΄λ–¤ κµ¬ν„μ²΄λ¥Ό μ“Έμ§€λ” μ—¬κΈ°μ„ κ²°μ •

Β  Β  Β  Β  Car car = new Car(engine);

  

Β  Β  Β  Β  car.drive(); // "Gas engine started." μ¶λ ¥

Β  Β  }

}

  

```

  

- `Car`λ” `Engine` νƒ€μ…μ„ λ°›μ•„μ„ μ‚¬μ©ν•λ―€λ΅ DIP λ§μ΅±

- κµ¬ν„μ²΄(`GasEngine`, `ElectricEngine` λ“±)λ” μ£Όμ…μ„ ν†µν•΄ κµμ²΄ κ°€λ¥

  

##### β… ν…μ¤νΈλ„ μ‰¬μ›μ§ (λ¨μ κ°μ²΄)

  

```java

public class MockEngine implements Engine {

Β  Β  public boolean started = false;

  

Β  Β  @Override

Β  Β  public void start() {

Β  Β  Β  Β  started = true;

Β  Β  }

}

```

  

```java

@Test

void testCarDrives() {

Β  Β  MockEngine mock = new MockEngine();

Β  Β  Car car = new Car(mock);

  

Β  Β  car.drive();

  

Β  Β  assertTrue(mock.started);

}

  

```

  

#### π’΅ ν•µμ‹¬ μ”μ•½

  

|κµ¬λ¶„|DIP μ„λ°|DIP λ§μ΅±|

|---|---|---|

|μμ΅΄μ„±|`GasEngine` μ§μ ‘ μƒμ„±|`Engine` μΈν„°νμ΄μ¤ μ£Όμ…|

|κ²°ν•©λ„|λ†’μ (λ³€κ²½ μ–΄λ ¤μ›€)|λ‚®μ (μ μ—°ν•¨)|

|ν…μ¤νΈ|μ–΄λ ¤μ›€ (Mock λ¶κ°€)|μ‰¬μ›€ (μΈν„°νμ΄μ¤λ΅ λ€μ²΄ κ°€λ¥)|

|ν™•μ¥μ„±|`GasEngine`λ§ κ°€λ¥|`ElectricEngine` λ“± λ‹¤λ¥Έ μ—”μ§„λ„ κ°€λ¥|

  

### π” DIP vs DI μ°¨μ΄

  
  

|κ°λ…|μ„¤λ…|

|---|---|

|**DIP** (μ›μΉ™)|μ„¤κ³„ μ›μΉ™. **"μ¶”μƒν™”μ— μμ΅΄ν•λΌ, κµ¬ν„μ— μμ΅΄ν•μ§€ λ§λΌ."**|

|**DI** (κΈ°μ )|κµ¬ν„ κΈ°μ . **"μμ΅΄ κ°μ²΄λ¥Ό μ™Έλ¶€μ—μ„ μ£Όμ…ν•΄λΌ."** (μ΄ μ›μΉ™μ„ μ‹¤ν„ν•λ” λ°©λ²• μ¤‘ ν•λ‚)|

  

μ¦‰, **DIλ” DIPλ¥Ό κµ¬ν„ν•κΈ° μ„ν• μλ‹¨** μ¤‘ ν•λ‚λ‹¤.

  

### β… DIP(μμ΅΄μ„± μ—­μ „ μ›μΉ™) ν•µμ‹¬ μ •λ¦¬

  

> **μƒμ„ λ¨λ“(μ •μ±…)**μ΄ **ν•μ„ λ¨λ“(κµ¬ν„)**μ— μμ΅΄ν•μ§€ λ§κ³ , Β 

> **λ‘ λ‹¤ μ¶”μƒν™”(μΈν„°νμ΄μ¤)μ— μμ΅΄**ν•λΌλ” μ›μΉ™.

  
  

### π“ DIPλ¥Ό μ λ€λ΅ μ΄ν•΄ν•κΈ° μ„ν•΄ κΌ­ μ•μ•„μ•Ό ν•  μ¶”κ°€ κ°λ…λ“¤

  

### 1. **μƒμ„/ν•μ„ λ¨λ“μ΄ λ­λƒ?**

  

- μƒμ„ λ¨λ“: ν•µμ‹¬ λΉ„μ¦λ‹μ¤ λ΅μ§, κ·μΉ™, μ •μ±… λ“± (μ: `OrderService`)

- ν•μ„ λ¨λ“: κµ¬μ²΄μ μΈ κµ¬ν„ (μ: `MemoryOrderRepository`, `JdbcOrderRepository`)

  

```java

// DIP μ„λ° (μƒμ„κ°€ ν•μ„μ— μ§μ ‘ μμ΅΄)

public class OrderService {

Β  Β  private MemoryOrderRepository repository = new MemoryOrderRepository();

}

```

  

```java

// DIP λ§μ΅± (μƒμ„λ„ ν•μ„λ„ μΈν„°νμ΄μ¤μ— μμ΅΄)

public class OrderService {

Β  Β  private final OrderRepository repository;

  

Β  Β  public OrderService(OrderRepository repository) {

Β  Β  Β  Β  this.repository = repository;

Β  Β  }

}

```

  

### 2. **DIPλ¥Ό μ μ©ν•λ©΄ μ–»λ” μ‹¤μ§μ  μ΄μ **

  

| μ΄μ  Β  Β  Β  Β  | μ„¤λ… Β  Β  Β  Β  Β  Β  Β  Β  Β  Β  Β  Β  Β  Β  Β  Β  Β  Β  Β  Β  Β  Β  Β  |

| ---------- | ------------------------------------------------ |

| β… ν™•μ¥μ„± Β  Β  Β | μƒλ΅μ΄ κµ¬ν„μ²΄λ¥Ό μ‰½κ² λ¶™μΌ μ μμ (`RedisRepo`, `MongoRepo` λ“±) |

| β… ν…μ¤νΈ μ©μ΄ Β  | `FakeRepo`, `MockRepo`λ¥Ό λ°”λ΅ μ£Όμ…ν•΄μ„ ν…μ¤νΈ κ°€λ¥ Β  Β  Β  Β  Β  |

| β… μ μ§€λ³΄μ νΈμ Β | λΉ„μ¦λ‹μ¤ λ΅μ§κ³Ό κµ¬ν„μ΄ λ¶„λ¦¬λμ–΄ λ³€κ²½ μν–¥ β†“ Β  Β  Β  Β  Β  Β  Β  Β  Β  Β  Β  Β |

| β… μμ΅΄ λ°©ν–¥ λ…ν™• | μƒμ„ μ •μ±…μ΄ κµ¬ν„ μ„Έλ¶€μ‚¬ν•­μ— λλ ¤κ°€μ§€ μ•μ Β  Β  Β  Β  Β  Β  Β  Β  Β  Β  Β  Β  Β |

  

### 3. **DIPλ” SRP(λ‹¨μΌ μ±…μ„ μ›μΉ™)μ™€ μ§μ΄λ‹¤**

  

- DIPλ” λ‹¨μΌ μ±…μ„ μ›μΉ™(SRP)κ³Ό ν•¨κ» **"μ—­ν• κ³Ό κµ¬ν„μ„ λ¶„λ¦¬"**ν•λ” μ„¤κ³„λ¥Ό κ°€λ¥ν•κ² ν•΄μ¤μ•Όν•¨.

- μ: `OrderService`λ” "μ£Όλ¬Έ μ²λ¦¬"λΌλ” μ—­ν• λ§ μ§‘μ¤‘ν•κ³ , μ €μ¥ λ°©μ‹μ€ κ΄€μ‹¬ μ—†μ.

  

---

  

### 4. **DIPλ¥Ό μ‹¤ν„ν•λ” λ°©λ²•μ€ DI**

  

- DIPλ” **μ„¤κ³„ μ›μΉ™**μ΄κ³ , Β  Β 

- DI(Dependency Injection)λ” κ·Έκ±Έ **κµ¬ν„ν•λ” κΈ°μ /ν¨ν„΄**

- Springμ€ DIλ¥Ό ν†µν•΄ DIPλ¥Ό μμ—°μ¤λ½κ² μ‹¤ν„ν•κ² ν•΄μ¤€λ‹¤.

  

---

  

### π‘‰ DIPλ¥Ό μ λ€λ΅ μ΄ν•΄ν•λ ¤λ©΄:

  

- λ‹¨μν "μΈν„°νμ΄μ¤ μ¨μ•Ό ν•λ‹¤"λ” μμ¤€μ„ λ„μ–΄μ„μ„,

- **"μμ΅΄ λ°©ν–¥μ΄ μ¶”μƒν™”λ΅ ν–¥ν•λ„λ΅ μ„¤κ³„ν•λ” κ²ƒ"**μ΄ ν•µμ‹¬μ΄κ³ ,

- **DIλ” κ·Έκ±Έ λ„μ™€μ£Όλ” κΈ°μ **μ΄λΌλ” μ μ„ μ΄ν•΄ν•΄μ•Ό ν•λ‹¤.